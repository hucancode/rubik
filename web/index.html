<!doctype html>
<html>
    <head>
        <script type="module">
            import init from "./rubik.js";
            async function run() {
                try {
                    if (!navigator.gpu) {
                        document.getElementById("canvas").remove();
                        document.body.appendChild(
                            document.createElement("h1"),
                        ).textContent = "WebGPU not supported.";
                        throw Error("WebGPU not supported.");
                    }
                    await init();
                } catch (e) {
                    console.error(
                        "Something wrong when initialize graphics: " + e,
                    );
                } finally {
                    document.getElementById("loading").remove();
                }
            }
            run();
        </script>
        <style>
            html,
            body {
                margin: 0;
                width: 100%;
                height: 100%;
                overflow: hidden;
                display: grid;
                place-items: center;
            }
            canvas {
                display: block;
                margin: auto;
            }
            #loading {
                font-size: 24px;
            }
        </style>
    </head>
    <body>
        <h1 id="loading">Loading...</h1>
        <canvas id="canvas"></canvas>
    </body>
</html>
